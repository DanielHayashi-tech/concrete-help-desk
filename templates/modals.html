<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&family=Playfair+Display:wght@500&display=swap"
        rel="stylesheet">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>Modal Buttons</title>
    <style>
        /* Added CSS for table from the linked site */
        body {
            font-family: 'Lato', sans-serif;
            color: #333;
            background-color: #f2f2f2;
        }

        .table-container {
            overflow-x: auto;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 1px 20px 0 rgba(69, 90, 100, .08);
            margin-bottom: 30px;
        }

        .table-container .table {
            width: 100%;
            margin-bottom: 0;
        }

        .table-container .table thead th {
            text-align: center;
            padding: .75rem 1rem;
            background-color: #b3b3b3;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            font-weight: 600; /* Increase font weight for emphasis */
        }

        .table-container .table tbody td {
            min-height: 1010px;
            text-align: center;
            padding: .75rem 1rem;
            vertical-align: middle; /* Center vertically */
        }

        /* Zebra striping for rows */
        .table-container .table tbody tr:nth-child(even) {
            background-color: #e9ecef;
            /* light grey */
        }

        .modal-button {
            position: absolute;
            top: 20px;
            left: 20px;
        }

        .modal-button span {
            margin-left: 5px; /* Add some space between the arrow and the text */
        }

        h2 {
            font-family: 'Playfair Display', serif;
            color: #7d4627;
        }

        .table-container .table tbody td:nth-child(14),
        .table-container .table tbody td:nth-child(15) {
            white-space: normal; /* Allow line breaks within the cell */
            word-wrap: break-word; /* Wrap long words */
        }

        .table-container .table tbody td:last-child {
            vertical-align: middle; /* Center vertically */
        }

        .table-container .table tbody td:last-child .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            color: #007bff;
            border-color: #007bff;
        }

        .table-container .table tbody td:last-child .btn svg {
            width: 1em;
            height: 1em;
        }

        /* Additional styles for column widths */
        .table-container .table thead th:nth-child(14),
        .table-container .table tbody td:nth-child(14) {
            width: 15%; /* Increased width for the Internal Note column */
        }

        .table-container .table thead th:nth-child(1),
        .table-container .table tbody td:nth-child(1) {
        display: none;
        }

        /* Move the title to the left */
        .table-title {
            text-align: left;
        }

        /* Style the buttons */
        .button-container .btn {
            background-color: #b3b3b3;
            color: #fff;
            border: none;  /* Remove border */
            margin-top: 20px;  /* Add space above the button */
        }

        .button-container .btn:hover {
            background-color: #a3a3a3;
            color: #fff;
        }

        .back-button i {
        color: #000;
        }

        /* Styles for modal content */
        .modal-content {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 1px 20px 0 rgba(69, 90, 100, .08);
            padding: 20px;
        }

        /* Styles for modal header */
        .modal-header {
            background-color: #b3b3b3;
            padding: .75rem 1rem;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            text-align: center;
        }

        /* Styles for modal titles */
        .modal-title {
            font-family: 'Playfair Display', serif;
            color: #7d4627;
            font-weight: 600;
        }

        /* Styles for form inputs */
        .form-control {
            border-radius: 10px;
            border: 1px solid #b3b3b3;
        }

        /* Styles for modal footer */
        .modal-footer {
            padding: .75rem 1rem;
            background-color: #f2f2f2;
        }

        /* Styles for modal buttons */
        .modal-footer .btn {
            background-color: #b3b3b3;
            color: #fff;
            border: none;  
        }

        .modal-footer .btn:hover {
            background-color: #a3a3a3;
            color: #fff;
        }

        /* Styles for close button */
        .close {
            color: #333;
        }

        .close:hover {
            color: #7d4627;
        }

    </style>
</head>

<body>
    <a href="/display" class="btn btn-secondary modal-button">
        <i class="fa fa-arrow-left"></i> 
    </a>    <br>
    <br>
    <div class="container-fluid">

        <!-- Title -->
        <div class="text-center mt-4 mb-4">
            <h1> Update Customer Data</h1>
        </div>
       

<!-- Customer Table -->
<div class="table-container">
    <h3 class="table-title mb-4">Manage Customer Data</h3>
         <!-- Customer Filter Section -->
         <div class="row mb-3">
            <div class="col-3">
                <div class="input-group">
                    <input type="text" class="form-control" id="filterFirstName" placeholder="Filter by First Name">
                    <div class="input-group-append">
                        <span class="input-group-text"><i class="fa fa-search"></i></span>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="input-group">
                    <input type="text" class="form-control" id="filterEmail" placeholder="Filter by Email">
                    <div class="input-group-append">
                        <span class="input-group-text"><i class="fa fa-search"></i></span>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="input-group">
                    <input type="text" class="form-control" id="filterPhone" placeholder="Filter by Phone">
                    <div class="input-group-append">
                        <span class="input-group-text"><i class="fa fa-search"></i></span>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="input-group">
                    <input type="text" class="form-control" id="filterEquipmentType" placeholder="Filter by Equipment Type">
                    <div class="input-group-append">
                        <span class="input-group-text"><i class="fa fa-search"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of Customer Filter Section -->
    <table class="table table-striped">
        <thead>
            <tr>
                <th class="text-center">Customer ID</th>
                <th class="text-center">First Name</th>
                <th class="text-center">Last Name</th>
                <th class="text-center">Email</th>
                <th class="text-center">Address</th>
                <th class="text-center">City</th>
                <th class="text-center">State</th>
                <th class="text-center">Zip</th>
                <th class="text-center">Phone</th>
                <th class="text-center">Alt Phone</th>
                <th class="text-center">TDL</th>
                <th class="text-center">TDL Experation Date</th>
                <th class="text-center">Insurance Experation Date</th>
                <th class="text-center">Customer Note</th>
                <th class="text-center">Status Name</th>
                <th class="text-center">Actions</th>

            </tr>
        </thead>
        <tbody>
            {% for row in customers_data %}
            <tr>
                <td class="text-center customer-customer-id">{{ row.CustomerID }}</td>
                <td class="text-center customer-first-name">{{ row.FirstName }}</td>
                <td class="text-center customer-last-name">{{ row.LastName }}</td>
                <td class="customer-email text-center customer-email">{{ row.Email }}</td>
                <td class="text-center customer-address">{{ row.Address }}</td>
                <td class="text-center customer-city">{{ row.City }}</td>
                <td class="text-center customer-state">{{ row.State }}</td>w
                <td class="text-center customer-zip">{{ row.Zip }}</td>
                <td class="text-center customer-phone">{{ row.Phone }}</td>
                <td class="text-center customer-altphone">{{ row.AltPhone }}</td>
                <td class="text-center customer-tdl">{{ row.TDL }}</td>
                <td class="text-center customer-tdl-experation-date">{{ row.TDLExpirationDate}}</td>
                <td class="text-center customer-ins-experation-date">{{ row.InsuranceExpDate }}</td>
                <td class="text-center customer-note">{{ row.CustomerNote }}</td>
                <td class="text-center customer-status-id">{{ row.StatusName }}</td>
                <td class="text-center">
                    <button class="btn btn-primary edit-button-customers" data-toggle="modal" data-target="#editCustomerModal" data-customer-id="{{ row.CustomerID }}">Edit</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Buttons -->
    <div class="button-container text-center mb-4">
        <button class="btn btn-primary add-button" data-toggle="modal" data-target="#addCustomerModal">Add Customer</button>
    </div>
</div>

<!-- Equipment Table -->
<div class="table-container">
    <h3> Equipment Table!</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th class="text-center">Equipment ID</th>
                <th class="text-center">Equipment Type</th>
                <th class="text-center">Condition</th>
                <th class="text-center">Status ID</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for row in equipment_data %}
            <tr>
                <td class="text-center equipment-equipment-id">{{ row.EquipmentID }}</td>
                <td class="customer-equipment-type text-center equipment-equipment-type">{{ row.EquipmentType }}</td>
                <td class="text-center equipment-equipment-condition">{{ row.Condition }}</td>
                <td class="text-center equipment-status-id">{{ row.StatusID }} ({{ row.EquipmentStatusName }})</td>
                <td class="text-center">
                    <button class="btn btn-primary edit-button-equipment" data-toggle="modal" data-target="#editEquipmentModal" data-equipment-id="{{ row.EquipmentID }}">Edit</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Buttons -->
    <div class="button-container text-center mb-4">
        <button class="btn btn-primary add-button" data-toggle="modal" data-target="#addEquipmentModal">Add Equipment</button>
    </div>
</div>


<!-- Rentals Table -->
<div class="table-container">
    <h3> Rentals Table!</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th class="text-center">Rental ID</th>
                <th class="text-center">Customer Name</th>
                <th class="text-center">Equipment Type</th>
                <th class="text-center">Rental Date</th>
                <th class="text-center">Return Date</th>
                <th class="text-center">Return Time</th>
                <th class="text-center">Internal Note</th>
                <th class="text-center">Status ID</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rental_data %}
            <tr>
                <td class="text-center rentals-id">{{ row.RentalID }}</td>
                <td class="text-center rentals-fk-customer-id">{{ row.CustomerName }}</td>
                <td class="text-center rentals-equipment-fk-id">{{ row.EquipmentType }}</td>
                <td class="text-center rentals-rental-date">{{ row.RentalDate }}</td>
                <td class="text-center rentals-return-date">{{ row.ReturnDate }}</td>
                <td class="text-center rentals-return-time">{{ row.ReturnTime }}</td>
                <td class="text-center rentals-internal-note">{{ row.InternalNote }}</td>
                <td class="text-center rentals-status-id">{{ row.StatusName }}</td>
                <td class="text-center">
                    <button class="btn btn-primary edit-button-rentals" data-toggle="modal" data-target="#editRentalModal" data-customer-id="{{ row.RentalID }}">Edit</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Buttons -->
    <div class="button-container text-center mb-4">
        <button class="btn btn-primary add-rentals" data-toggle="modal" data-target="#addRentalModal">Add Rental</button>
    </div>
</div>



<!-- Vehicles Filter Section -->
<div class="row mb-3">
    <div class="col-6 mx-auto">
        <div class="input-group">
            <input type="text" class="form-control" id="filterVehicleModel" placeholder="Filter by Vehicle Model">
            <div class="input-group-append">
                <span class="input-group-text"><i class="fa fa-search"></i></span>
            </div>
        </div>
    </div>
</div>

<!-- Vehicles Table -->
<div class="table-container">
    <h3> Vehicles Table!</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th class="text-center">Vehicle ID</th>
                <th class="text-center">Customer ID</th>
                <th class="text-center">Vehicle Model</th>
                <th class="text-center">Vehicle Make</th>
                <th class="text-center">Vehicle Year</th>
                <th class="text-center">License Plate</th>
                <th class="text-center">Status ID</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for row in vehicles_data %}
            <tr>
                <td class="text-center vehicles-id">{{ row.VehicleID }}</td>
                <td class="text-center vehicles-fk-customer-id">{{ row.CustomerID }}</td>
                <td class="text-center vehicles-model">{{ row.VehicleModel }}</td>
                <td class="text-center vehicles-make">{{ row.VehicleMake }}</td>
                <td class="text-center vehicles-year">{{ row.VehicleYear }}</td>
                <td class="text-center vehicles-lp">{{ row.LicensePlate }}</td>
                <td class="text-center vehicles-status-id">{{ row.StatusID }}</td>
                <td class="text-center">
                    <button class="btn btn-primary edit-button-vehicles" data-toggle="modal" data-target="#editVehicleModal" data-equipment-id="{{ row.VehicleID }}">Edit</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Buttons -->
    <div class="button-container text-center mb-4">
        <button class="btn btn-primary add-button-vehicles" data-toggle="modal" data-target="#addVehicleModal">Add Vehicle</button>
    </div>
</div>



<!---------------------------------------------------------- Add Data Modals ---------------------------------------------------------->

<!-- Add Customer Modal -->
<div class="modal fade" id="addCustomerModal" tabindex="-1" role="dialog" aria-labelledby="addCustomerModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="addCustomerModalLabel">Add Customer</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form id="addCustomerForm">
            <div class="modal-body">
                <!-- Input fields for each column here -->
                <div class="form-group">
                    <label for="FirstName">First Name</label>
                    <input type="text" name="FirstName" id="FirstName" class="form-control" placeholder="First Name">
                </div>
                <div class="form-group">
                    <label for="LastName">Last Name</label>
                    <input type="text" name="LastName" id="LastName" class="form-control" placeholder="Last Name">
                </div>
                <div class="form-group">
                    <label for="Email">Email</label>
                    <input type="email" name="Email" id="Email" class="form-control" placeholder="Email">
                </div>
                <div class="form-group">
                    <label for="Address">Address</label>
                    <input type="text" name="Address" id="Address" class="form-control" placeholder="Address">
                </div>
                <div class="form-group">
                    <label for="City">City</label>
                    <input type="text" name="City" id="City" class="form-control" placeholder="City">
                </div>
                <div class="form-group">
                    <label for="State">State</label>
                    <input type="text" name="State" id="State" class="form-control" placeholder="State">
                </div>
                <div class="form-group">
                    <label for="Zip">Zip</label>
                    <input type="text" name="Zip" id="Zip" class="form-control" placeholder="Zip">
                </div>
                <div class="form-group">
                    <label for="Phone">Phone</label>
                    <input type="text" name="Phone" id="Phone" class="form-control" placeholder="Phone">
                </div>
                <div class="form-group">
                    <label for="AltPhone">Alt Phone</label>
                    <input type="text" name="AltPhone" id="AltPhone" class="form-control" placeholder="Alt Phone">
                </div>
                <div class="form-group">
                    <label for="TDL">TDL #</label>
                    <input type="text" name="TDL" id="TDL" class="form-control" placeholder="TDL #">
                </div>
                <div class="form-group">
                    <label for="TDLExpirationDate">TDL Exp Date</label>
                    <input type="date" name="TDLExpirationDate" id="TDLExpirationDate" class="form-control" placeholder="TDL Exp Date">
                </div>
                <div class="form-group">
                    <label for="InsuranceExpDate">Insurance Exp</label>
                    <input type="date" name="InsuranceExpDate" id="InsuranceExpDate" class="form-control" placeholder="Insurance Exp">
                </div>
                <div class="form-group">
                    <label for="CustomerNote">Customer Note</label>
                    <textarea name="CustomerNote" id="CustomerNote" class="form-control" placeholder="Customer Note"></textarea>
                </div>
                <div class="form-group">
                    <label for="StatusID">Status ID</label>
                    <select class="form-control" id="StatusID" name="StatusID">
                        <!-- Options will be dynamically generated -->
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>
</div>


<!-- Add Equipment Modal -->
<div class="modal fade" id="addEquipmentModal" tabindex="-1" role="dialog" aria-labelledby="addEquipmentModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="addEquipmentModalLabel">Add Equipment</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form id="addEquipmentForm">
            <div class="modal-body">
                <!-- Input fields for each column here -->
                <div class="form-group">
                    <label for="EquipmentType">Equipment Type</label>
                    <input type="text" name="EquipmentType" id="EquipmentType" class="form-control" placeholder="Equipment Type">
                </div>
                <div class="form-group">
                    <label for="EquipmentCondition">Equipment Condition</label>
                    <input type="text" name="EquipmentCondition" id="EquipmentCondition" class="form-control" placeholder="Description of the Condition">
                </div>
                <div class="form-group">
                    <label for="addStatusID">Status ID</label>
                    <select class="form-control" id="addStatusID" name="StatusID">
                        <!-- Options will be dynamically generated -->
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>
</div>

<!-- Add Rental Modal -->
<div class="modal fade" id="addRentalModal" tabindex="-1" role="dialog" aria-labelledby="addRentalModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="addRentalModalLabel">Add Rental</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form id="addRentalForm">
            <div class="modal-body">
                <!-- Input fields for each column here -->
                <div class="form-group">
                    <label for="add_customer_id">Customer ID</label>
                    <input type="text" name="CustomerID" id="add_customer_id" class="form-control" placeholder="Equipment Type">
                </div>
                <div class="form-group">
                    <label for="add_equipment_id">Equipment ID</label>
                    <input type="text" name="EquipmentID" id="add_equipment_id" class="form-control" placeholder="Equipment ID">
                </div>
                <div class="form-group">
                    <label for="add_rental_date">Rental Date</label>
                    <input type="date" name="RentalDate" id="add_rental_date" class="form-control" placeholder="Day of the Rental">
                </div>
                <div class="form-group">
                    <label for="add_return_date">Return Date</label>
                    <input type="date" name="ReturnDate" id="add_return_date" class="form-control" placeholder="Return Date">
                </div>
                <div class="form-group">
                    <label for="add_return_time">Return Time</label>
                    <input type="text" name="ReturnTime" id="add_return_time" class="form-control" placeholder="Return Time">
                </div>
                <div class="form-group">
                    <label for="add_internal_note">Internal Note</label>
                    <textarea name="InternalNote" id="add_internal_note" class="form-control" placeholder="Internal Note"></textarea>
                </div>
                <div class="form-group">
                    <label for="add_status_id_rental">Status ID</label>
                    <select name="StatusID" id="add_status_id_rental" class="form-control"></select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>
</div>

<!-- Add Vehicle Modal -->
<div class="modal fade" id="addVehicleModal" tabindex="-1" role="dialog" aria-labelledby="addVehicleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="addVehicleModalLabel">Add Vehicle</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form id="addVehicleForm">
            <div class="modal-body">
                <!-- Input fields for each column here -->
                <div class="form-group">
                    <label for="add_customer_id">Customer ID</label>
                    <input type="text" name="CustomerID" id="add_customer_id" class="form-control" placeholder="Equipment Type">
                </div>
                <div class="form-group">
                    <label for="add_vehicle_model">Vehicle Model</label>
                    <input type="text" name="VehicleModel" id="add_vehicle_model" class="form-control" placeholder="Vehicle Model">
                </div>
                <div class="form-group">
                    <label for="add_vehicle_make">Vehicle Make</label>
                    <input type="text" name="VehicleMake" id="add_vehicle_make" class="form-control" placeholder="Vehicle Make">
                </div>
                <div class="form-group">
                    <label for="edit_vehicle_year">Vehicle Year</label>
                    <input type="number" name="VehicleYear" id="edit_vehicle_year" class="form-control" placeholder="Vehicle Year" min="1886" max="2099">
                </div>
                
                <div class="form-group">
                    <label for="add_lisence_plate">Lisence Plate</label>
                    <input type="text" name="LicensePlate" id="add_lisence_plate" class="form-control" placeholder="Licesne Plate">
                </div>
                <div class="form-group">
                    <label for="add_status_id_rental">Status ID</label>
                    <select name="StatusID" id="add_status_id_vehicle" class="form-control"></select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>
</div>

    <!---------------------------------------------------------- Edit Data Modals ---------------------------------------------------------->


     <!-- Edit Customer Modal -->
<div class="modal fade" id="editCustomerModal" tabindex="-1" role="dialog" aria-labelledby="editCustomerModalLabel"
     aria-hidden="true">
     <div class="modal-dialog" role="document">
         <div class="modal-content">
             <div class="modal-header">
                 <h5 class="modal-title" id="editCustomerModalLabel">Edit Customer</h5>
                 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                 </button>
             </div>
             <form id="editCustomerForm">
                 <div class="modal-body">
                     <!-- Input fields for each column here -->
                     <div class="form-group">
                        <label for="customer_id">Customer ID</label>
                        <input type="text" name=CustomerID id="edit_customer_id" class="form-control" placeholder="Customer ID" disabled>
                    </div>
                     <div class="form-group">
                         <label for="edit_first_name">First Name</label>
                         <input type="text" name="FirstName" id="edit_first_name" class="form-control" placeholder="First Name">
                     </div>
                     <div class="form-group">
                         <label for="edit_last_name">Last Name</label>
                         <input type="text" name="LastName" id="edit_last_name" class="form-control" placeholder="Last Name">
                     </div>
                     <div class="form-group">
                         <label for="edit_email">Email</label>
                         <input type="email" name="Email" id="edit_email" class="form-control" placeholder="Email">
                     </div>
                     <div class="form-group">
                         <label for="edit_address">Address</label>
                         <input type="text" name="Address" id="edit_address" class="form-control" placeholder="Address">
                     </div>
                     <div class="form-group">
                         <label for="edit_city">City</label>
                         <input type="text" name="City" id="edit_city" class="form-control" placeholder="City">
                     </div>
                     <div class="form-group">
                         <label for="edit_state">State</label>
                         <input type="text" name="State" id="edit_state" class="form-control" placeholder="State">
                     </div>
                     <div class="form-group">
                         <label for="edit_zip">Zip</label>
                         <input type="text" name="Zip" id="edit_zip" class="form-control" placeholder="Zip">
                     </div>
                     <div class="form-group">
                         <label for="edit_phone">Phone</label>
                         <input type="text" name="Phone" id="edit_phone" class="form-control" placeholder="Phone">
                     </div>
                     <div class="form-group">
                         <label for="edit_alt_phone">Alt Phone</label>
                         <input type="text" name="AltPhone" id="edit_alt_phone" class="form-control" placeholder="Alt Phone">
                     </div>
                     <div class="form-group">
                         <label for="edit_tdl">TDL #</label>
                         <input type="text" name="TDL" id="edit_tdl" class="form-control" placeholder="TDL #">
                     </div>
                     <div class="form-group">
                         <label for="edit_tdl_exp_date">TDL Exp Date</label>
                         <input type="date" name="TDLExpirationDate" id="edit_tdl_exp_date" class="form-control" placeholder="TDL Exp Date">
                     </div>
                     <div class="form-group">
                         <label for="edit_insurance_exp_date">Insurance Exp</label>
                         <input type="date" name="InsuranceExpDate" id="edit_insurance_exp_date" class="form-control" placeholder="Insurance Exp">
                     </div>
                     <div class="form-group">
                        <label for="edit_customer_note">Customer Note</label>
                        <textarea name="CustomerNote" id="edit_customer_note" class="form-control" placeholder="Customer Note"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit_status_id">Status ID</label>
                        <select class="form-control" id="edit_status_id" name="StatusID">
                            <!-- Options will be dynamically generated -->
                        </select>
                    </div>
                 </div>
                 <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
             </form>
         </div>
     </div>
</div>

 <!-- Edit Equipment Modal -->
<div class="modal fade" id="editEquipmentModal" tabindex="-1" role="dialog" aria-labelledby="editEquipmentModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editEquipmentModalLabel">Edit Equipment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="editEquipmentForm">
                <div class="modal-body">
                    <!-- Hidden field for the equipment ID -->
                    <input type="hidden" id="editEquipmentID" name="EquipmentID">
                    <!-- Input fields for each column here -->
                    <div class="form-group">
                        <label for="editEquipmentType">Equipment Type</label>
                        <input type="text" name="EquipmentType" id="editEquipmentType" class="form-control" placeholder="Equipment Type">
                    </div>
                    <div class="form-group">
                        <label for="editEquipmentCondition">Equipment Condition</label>
                        <input type="text" name="Condition" id="editEquipmentCondition" class="form-control" placeholder="Equipment Condition">
                    </div>
                    <div class="form-group">
                        <label for="editStatusID">Status ID</label>
                        <select class="form-control" id="editStatusID" name="StatusID">
                            <!-- Options will be dynamically generated -->
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>


<!-- Edit Rental Modal -->
<div class="modal fade" id="editRentalModal" tabindex="-1" role="dialog" aria-labelledby="editRentalModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editRentalModalLabel">Edit Rental</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="editRentalForm">
                <div class="modal-body">
                    <!-- Input fields for each column here -->
                    <div class="form-group">
                        <label for="edit_rentals_id">Rental ID</label>
                        <input type="text" name="#RentalID" id="edit_rentals_id" class="form-control" placeholder="Rental ID" disabled>
                    </div>
                    <div class="form-group">
                        <label for="edit_customer_id_rentals">Customer ID</label>
                        <input type="text" name=CustomerID id="edit_customer_id_rentals" class="form-control" placeholder="Customer ID" disabled>
                    </div>
                    <div class="form-group">
                        <label for="edit_equipment_id_rentals">Equipment ID</label>
                        <input type="text" name="equipmentId" id="edit_equipment_id" class="form-control" placeholder="Equipment ID">
                    </div>
                    <div class="form-group">
                        <label for="edit_rental_date">Rental Date</label>
                        <input type="date" name="RentalDate" id="edit_rental_date" class="form-control" placeholder="Day of the Rental">
                    </div>
                    <div class="form-group">
                        <label for="edit_return_date">Return Date</label>
                        <input type="date" name="ReturnDate" id="edit_return_date" class="form-control" placeholder="Return Date">
                    </div>
                    <div class="form-group">
                        <label for="edit_return_time">Return Time</label>
                        <input type="text" name="ReturnTime" id="edit_return_time" class="form-control" placeholder="Return Time">
                    </div>
                    <div class="form-group">
                        <label for="edit_internal_note">Internal Note</label>
                        <textarea name="InternalNote" id="edit_internal_note" class="form-control" placeholder="Internal Note"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit_status_id_rental">Status ID</label>
                        <select name="StatusID" id="edit_status_id_rental" class="form-control"></select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>


 <!-- Edit Vehicle Modal -->
<div class="modal fade" id="editVehicleModal" tabindex="-1" role="dialog" aria-labelledby="editVehicleModalLabel"
 aria-hidden="true">
 <div class="modal-dialog" role="document">
     <div class="modal-content">
         <div class="modal-header">
             <h5 class="modal-title" id="editVehicleModalLabel">Edit Vehicle</h5>
             <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                 <span aria-hidden="true">&times;</span>
             </button>
         </div>
         <form id="editVehiclesForm">
             <div class="modal-body">
                 <!-- Input fields for each column here -->
                 <div class="form-group">
                    <label for="edit_vehicle_id">Vehicle ID</label>
                    <input type="text" name="VehicleID" id="edit_vehicle_id" class="form-control" placeholder="Vehicle ID" disabled>
                </div>
                 <div class="form-group">
                     <label for="edit_customer_id_vehicles">Customer ID</label>
                     <input type="text" name="CustomerID" id="edit_customer_id_vehicles" class="form-control" placeholder="Customer ID" disabled>
                 </div>
                 <div class="form-group">
                     <label for="edit_vehicle_model">Vehicle Model</label>
                     <input type="text" name="VehicleModel" id="edit_vehicle_model" class="form-control" placeholder="Vehicle Model">
                 </div>
                 <div class="form-group">
                     <label for="edit_vehicle_make">Vehicle Make</label>
                     <input type="text" name="VehicleMake" id="edit_vehicle_make" class="form-control" placeholder="Vehicle Make">
                 </div>
                 <div class="form-group">
                     <label for="edit_vehicle_year">Vehicle Year</label>
                     <input type="text" name="VehicleYear" id="edit_vehicle_year" class="form-control" placeholder="Vehicle Year">
                 </div>
                 <div class="form-group">
                     <label for="edit_vehicle_lp">Lisence Plate</label>
                     <input type="text" name="LicensePlate" id="edit_vehicle_lp" class="form-control" placeholder="Lisence Plate">
                 </div>
                 <div class="form-group">
                    <label for="edit_status_id_vehicle">Status ID</label>
                    <select name="StatusID" id="edit_status_id_vehicle" class="form-control"></select>
                </div>
             </div>
             <div class="modal-footer">
                 <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                 <button type="submit" class="btn btn-primary">Save Changes</button>
             </div>
         </form>
     </div>
 </div>
</div>

<!-- Script for filling the form -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>

// Function to convert form array to object
function serializeToObject(formArray) {
    var data = {};
    for(var i = 0; i < formArray.length; i++){
        data[formArray[i]['name']] = formArray[i]['value'];
    }
    return data;
}

// Mapping for Vehicles
var mappingVehicles = {
    "vehicles-id": "edit_vehicle_id",
    "vehicles-fk-customer-id": "edit_customer_id_vehicles",
    "vehicles-model": "edit_vehicle_model",
    "vehicles-make": "edit_vehicle_make",
    "vehicles-year": "edit_vehicle_year",
    "vehicles-lp": "edit_vehicle_lp",
    "vehicles-status-id": "edit_status_id_vehicle"
};

function fetchStatusIDsVehicle(select, status_id) {
    return fetch('/getVehicle_status_ids')
        .then(response => response.json())
        .then(data => {
            // Remove all previous options
            while (select.firstChild) {
                select.removeChild(select.firstChild);
            }

            data.forEach(status => {
                const option = document.createElement('option');
                option.value = status.id;
                option.text = status.name + " (" + status.id + ")";
                select.appendChild(option);
            });

            // Set the selected status id
            if (status_id) select.value = status_id;
        });
}

// Function to run when an edit button is clicked
$(document).on("click", ".edit-button-vehicles", function () {
    var row = $(this).closest("tr"); // Get the row that the button is in
    var status_id = row.find(".vehicles-status-id").text().trim(); // Get the status ID

    // Transfer row data to modal
    for(var key in mappingVehicles){
        $('#'+mappingVehicles[key]).val( row.find('.'+key).text() );
    }

    // Fetch the status IDs from the server
    const select = document.getElementById('edit_status_id_vehicle');
    fetchStatusIDsVehicle(select, status_id)  // Here's where we fetch the status IDs
    .then(() => {
        // Now you can show the modal
        $('#editVehicleModal').modal('show');
    });
});

$(document).on("click", ".add-button-vehicles", function () {
    // Fetch the status IDs from the server
    const select = document.getElementById('add_status_id_vehicle');
    fetchStatusIDsVehicle(select);
});

$("#addVehicleForm").submit(function(event) {
    event.preventDefault();
    const formData = $(this).serializeArray().reduce(function(a, x) { a[x.name] = x.value; return a; }, {});
    $.ajax({
        type: "POST",
        url: "/create_vehicle",
        contentType: "application/json",
        data: JSON.stringify(formData),
        dataType: "json",
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            // Handle error: for example, show an error message
            alert("An error occurred. Please try again.");
        }
    });
});


$("#editVehiclesForm").submit(function(event) {
    event.preventDefault();
    
    var vehicleId = $('#edit_vehicle_id').val(); // Get the vehicle ID from the form
    const formData = serializeToObject($(this).serializeArray()); // Convert form data to an object

    $.ajax({
        type: "PUT",  // This should match the HTTP verb the server expects
        url: "/update_vehicles/" + vehicleId, // Replace with your server-side route
        contentType: "application/json",
        data: JSON.stringify(formData),
        dataType: "json",
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            // Handle error: for example, show an error message
            alert("An error occurred while trying to update the vehicle. Please try again.");
        }
    });
});


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                  VEHICLES                                                                                                                  //     
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Mapping for Rentals
var mappingRentals = {
    "rentals-id": "edit_rentals_id",
    "rentals-fk-customer-id": "edit_customer_id_rentals",
    "rentals-equipment-fk-id": "edit_equipment_id_rentals",
    "rentals-rental-date": "edit_rental_date",
    "rentals-return-date": "edit_return_date",
    "rentals-return-time": "edit_return_time",
    "rentals-internal-note": "edit_internal_note",
    "rentals-status-id": "edit_status_id_rental"
};

function fetchStatusIDsRental(select, status_id) {
    return fetch('/getRentals_status_ids')
        .then(response => response.json())
        .then(data => {
            // Remove all previous options
            while (select.firstChild) {
                select.removeChild(select.firstChild);
            }

            data.forEach(status => {
                const option = document.createElement('option');
                option.value = status.id;
                option.text = status.name + " (" + status.id + ")";
                select.appendChild(option);
            });

            // Set the selected status id
            if (status_id) select.value = status_id;
        });
}

// Function to serialize form data to an object
function serializeToObject(formArray) {
    var formData = {};
    for(var i = 0; i < formArray.length; i++) {
        var field = formArray[i];
        formData[field.name] = field.value;
    }
    return formData;
}



// Function to run when an edit button is clicked
$(document).on("click", ".edit-button-rentals", function () {
    var row = $(this).closest("tr"); // Get the row that the button is in
    var status_id = row.find(".rentals-status-id").text().trim(); // Get the status ID

    // Transfer row data to modal
    for(var key in mappingRentals){
        $('#'+mappingRentals[key]).val( row.find('.'+key).text() );
    }

    // Fetch the status IDs from the server
    const select = document.getElementById('edit_status_id_rental');
    fetchStatusIDsRental(select, status_id)  // Here's where we fetch the status IDs
    .then(() => {
        // Now you can show the modal
        $('#editRentalModal').modal('show');
    });
});



$(document).on("click", ".add-rentals", function () {
    // Fetch the status IDs from the server
    const select = document.getElementById('add_status_id_rental');
    fetchStatusIDsRental(select);
});



$("#addRentalForm").submit(function(event) {
    event.preventDefault();
    const formData = $(this).serializeArray().reduce(function(a, x) { a[x.name] = x.value; return a; }, {});
    
    $.ajax({
        type: "POST",
        url: "/create_rental",
        contentType: "application/json",
        data: JSON.stringify(formData),
        dataType: "json",
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            alert("An error occurred while adding the rental. Please try again.");
        }
    });
});


$("#editRentalForm").submit(function(e) {
    e.preventDefault();  

    var data = serializeToObject($(this).serializeArray());
    var id = $("#edit_rentals_id").val();

    $.ajax({
        url: '/update_rentals/' + id,
        type: 'PUT',
        data: JSON.stringify(data),
        contentType: 'application/json',
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            alert("An error occurred while updating the rental. Please try again.");
        }
    });
});




////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                  RENTALS                                                                                                                  //     
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var mappingEquipment = {
    "equipment-equipment-id": "editEquipmentID",
    "equipment-equipment-type": "editEquipmentType",
    "equipment-equipment-condition": "editEquipmentCondition",
    "equipment-status-id": "editStatusID"
};

var statusIds;

// Fetch the status IDs once when the page loads
fetch('/getEquipment_status_ids')
    .then(response => response.json())
    .then(data => statusIds = data);

// Function to run when an edit button is clicked
$(document).on("click", ".edit-button-equipment", function () {
    var row = $(this).closest("tr"); // Get the row that the button is in
    var status_id = row.find(".equipment-status-id").text().trim().split(" ")[0]; // Get the status ID

    // Transfer row data to modal
    for(var key in mappingEquipment){
        $('#'+mappingEquipment[key]).val( row.find('.'+key).text() );
    }

    const select = document.getElementById('editStatusID');

    // Remove all previous options
    while (select.firstChild) {
        select.removeChild(select.firstChild);
    }

    statusIds.forEach(status => {
        const option = document.createElement('option');
        option.value = status.id;
        option.text = status.name + " (" + status.id + ")";
        select.appendChild(option);
    });

    // Set the selected status id
    select.value = status_id;

    // Now you can show the modal
    $('#editEquipmentModal').modal('show');
});



$('#addEquipmentModal').on('show.bs.modal', function (event) {
// Fetch the status IDs from the server
fetch('/getEquipment_status_ids')
    .then(response => response.json())
    .then(data => {
        const select = document.getElementById('addStatusID');

        // Remove all previous options
        while (select.firstChild) {
            select.removeChild(select.firstChild);
        }

        data.forEach(status => {
            const option = document.createElement('option');
            option.value = status.id;
            option.text = status.name + " (" + status.id + ")";
            select.appendChild(option);
        });
    });
});


$("#editEquipmentForm").submit(function(e) {
    e.preventDefault();  

    var data = serializeToObject($(this).serializeArray());
    var id = $("#editEquipmentID").val();

    $.ajax({
        url: '/update_equipment/' + id,
        type: 'PUT',
        data: JSON.stringify(data),
        contentType: 'application/json',
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            // Handle error: for example, show an error message
            alert("An error occurred while updating the equipment. Please try again.");
        }
    });
});



$("#addEquipmentForm").submit(function(event) {
    event.preventDefault();  // Prevent the default form submission

    const formData = $(this).serializeArray().reduce(function(a, x) { a[x.name] = x.value; return a; }, {});

    $.ajax({
        type: "POST",
        url: "/create_equipment",  // URL that handles the form submission on the server
        contentType: "application/json",
        data: JSON.stringify(formData),
        dataType: "json",
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            // Handle error: for example, show an error message
            alert("An error occurred. Please try again.");
        }
    });
});


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                  EQUIPMENT                                                                                                                  //     
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var Customermapping = {
    "customer-customer-id": "edit_customer_id",
    "customer-first-name": "edit_first_name",
    "customer-last-name": "edit_last_name",
    "customer-email": "edit_email",
    "customer-phone": "edit_phone",
    "customer-altphone": "edit_alt_phone",
    "customer-address": "edit_address",
    "customer-city": "edit_city",
    "customer-state": "edit_state",
    "customer-zip": "edit_zip",
    "customer-tdl": "edit_tdl",
    "customer-tdl-experation-date": "edit_tdl_exp_date",
    "customer-ins-experation-date": "edit_insurance_exp_date",
    "customer-note": "edit_customer_note",
    "customer-status-id": "edit_status_id"  // Corrected this line
};


// Function to fetch the status IDs and populate the select list
function fetchStatusIDs(select, status_id) {
    return fetch('/getCustomer_status_ids')
        .then(response => response.json())
        .then(data => {
            // Remove all previous options
            while (select.firstChild) {
                select.removeChild(select.firstChild);
            }

            data.forEach(status => {
                const option = document.createElement('option');
                option.value = status.id;
                option.text = status.name + " (" + status.id + ")";
                select.appendChild(option);
            });

            // Set the selected status id
            select.value = status_id;
        });
}

// Function to run when an edit button is clicked
$(document).on("click", ".edit-button-customers", function () {
    var row = $(this).closest("tr"); // Get the row that the button is in
    var status_id = row.find(".customer-status-id").text().trim(); // Get the status ID

    // Transfer row data to modal
    for(var key in Customermapping){
        $('#'+Customermapping[key]).val( row.find('.'+key).text() );
    }
    
    // Set status id as data attribute for the modal
    $('#editCustomerModal').data('status-id', status_id);
});

$('#editCustomerModal').on('show.bs.modal', function (event) {
    // Fetch the status IDs from the server
    fetch('/getCustomer_status_ids')
        .then(response => response.json())
        .then(data => {
            const select = document.getElementById('edit_status_id');

            // Remove all previous options
            while (select.firstChild) {
                select.removeChild(select.firstChild);
            }

            data.forEach(status => {
                const option = document.createElement('option');
                option.value = status.id;
                option.text = status.name + " (" + status.id + ")";
                select.appendChild(option);
            });

            // Fetch stored status id
            var status_id = $(this).data('status-id');
            
            // Wait until the status IDs have been fetched and the options have been added
            // before setting the value
            fetchStatusIDs(select, status_id);
        });
    });


$('#addCustomerModal').on('show.bs.modal', function (event) {
    // Fetch the status IDs from the server
    fetch('/getCustomer_status_ids')
        .then(response => response.json())
        .then(data => {
            const select = document.getElementById('StatusID');

            // Remove all previous options
            while (select.firstChild) {
                select.removeChild(select.firstChild);
            }

            data.forEach(status => {
                const option = document.createElement('option');
                option.value = status.id;
                option.text = status.name + " (" + status.id + ")";
                select.appendChild(option);
            });
        });
});


$("#editCustomerForm").submit(function(e) {
    e.preventDefault();  // Prevent the form from submitting normally

    var data = serializeToObject($(this).serializeArray());  // Convert the form data to object
    var id = $("#edit_customer_id").val();  // Get the id of the customer to update

    $.ajax({
        url: '/update_customer/' + id,
        type: 'PUT',
        data: JSON.stringify(data),
        contentType: 'application/json',
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            // Handle error: for example, show an error message
        }
    });
});


$("#addCustomerForm").submit(function(e) {
    e.preventDefault();  

    var data = serializeToObject($(this).serializeArray());

    $.ajax({
        url: '/create_customer',
        type: 'POST',
        data: JSON.stringify(data),
        contentType: 'application/json',
        success: function(response) {
            location.reload();
        },
        error: function(error) {
            // Handle error: for example, show an error message
            alert("An error occurred. Please try again.");
        }
    });
});

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                  CUSTOMER                                                                                                                  //     
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$(document).ready(function(){
    $("#filterFirstName").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("table tbody tr").filter(function() {
            $(this).toggle($(this).find('.customer-first-name').text().toLowerCase().indexOf(value) > -1)
        });
    });
});

$(document).ready(function(){
    $("#filterEmail").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("table tbody tr").filter(function() {
            $(this).toggle($(this).find('.customer-email').text().toLowerCase().indexOf(value) > -1)
        });
    });
});

$(document).ready(function(){
    $("#filterPhone").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("table tbody tr").filter(function() {
            $(this).toggle($(this).find('.customer-phone').text().toLowerCase().indexOf(value) > -1)
        });
    });
});

$(document).ready(function(){
    $("#filterEquipmentType").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("table tbody tr").filter(function() {
            $(this).toggle($(this).find('.customer-equipment-type').text().toLowerCase().indexOf(value) > -1)
        });
    });
});
    

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                  FILTERS                                                                                                                  //     
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>



